<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>VFIED ‚Äî Decide For Me</title>
  <link rel="stylesheet" href="/src/style.css" />
  <style>
    /* Minimal styles so you see it working immediately */
    body{font-family:system-ui, -apple-system, Segoe UI, Roboto, sans-serif; margin:0; background:#0f172a; color:#e2e8f0}
    .container{max-width:900px; margin:32px auto; padding:0 16px}
    .card{background:#111827; border:1px solid #1f2937; border-radius:14px; padding:18px; margin-bottom:16px}
    h1{font-size:28px; margin:0 0 8px}
    .row{display:flex; gap:12px; flex-wrap:wrap; align-items:center}
    label{font-size:14px; opacity:.9}
    input, select, textarea{background:#0b1220; color:#e2e8f0; border:1px solid #263247; border-radius:10px; padding:10px 12px; outline:none}
    input[type="checkbox"]{transform:scale(1.1)}
    button{background:#6d28d9; border:none; color:white; padding:12px 16px; border-radius:12px; font-weight:700; cursor:pointer}
    button.secondary{background:#334155}
    button:disabled{opacity:.6; cursor:not-allowed}
    .chips{display:flex; gap:10px; flex-wrap:wrap}
    .chip{display:inline-flex; align-items:center; gap:8px; padding:8px 12px; border-radius:999px; background:#0b1220; border:1px solid #263247; cursor:pointer; user-select:none}
    .chip input{margin:0}
    .muted{opacity:.8; font-size:13px}
    .big{font-size:18px}
    .emoji{font-size:36px}
    .grid{display:grid; gap:12px}
    .grid-2{grid-template-columns:1fr; }
    @media(min-width:840px){ .grid-2{grid-template-columns:1fr 1fr;} }
    .result{line-height:1.5}
    .kpi{display:flex; gap:16px; font-size:13px; opacity:.9}
    .kpi span{background:#0b1220; padding:6px 10px; border-radius:999px; border:1px solid #263247}
    .rowsm{display:flex; gap:8px; align-items:center; flex-wrap:wrap}
    .mono{font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace; font-size:12px}
    .small{font-size:12px}
    
    /* Tab styles */
    .tabs{display:flex; gap:0; margin:16px 0; border-bottom:1px solid #1f2937}
    .tab{background:transparent; border:none; color:#94a3b8; padding:12px 24px; border-radius:0; font-weight:500; cursor:pointer; border-bottom:2px solid transparent; transition:all 0.2s ease}
    .tab:hover{color:#e2e8f0; background:#1e293b}
    .tab.active{color:#e2e8f0; border-bottom-color:#6d28d9; background:#111827}
    .tabpanel{display:block}
    .tabpanel.hidden{display:none}
    
    /* Event list styles */
    .event-list{list-style:none; margin:0; padding:0}
  </style>
</head>
<body>
  <div class="container">
    <h1>üçΩÔ∏è VFIED ‚Äî One-Tap Food Decision</h1>
    <div class="muted">Hooked to your local server at <code class="mono">http://localhost:3001</code></div>

    <!-- TABS -->
    <nav class="tabs" role="tablist">
      <button class="tab active" data-tab="food"   role="tab" aria-selected="true">üç≤ Food</button>
      <button class="tab"         data-tab="events" role="tab" aria-selected="false">üé∂ Events</button>
      <button class="tab"         data-tab="travel" role="tab" aria-selected="false">üß≠ Travel</button>
    </nav>

    <section id="tab-food" class="tabpanel" role="tabpanel" aria-labelledby="tab-food-btn">
      <!-- Decision Card -->
      <div class="card">
        <div class="grid grid-2">
          <div>
            <label for="moodInput">How are you feeling?</label>
            <input id="moodInput" placeholder="e.g. stressed but want something light" style="width:100%; margin-top:6px" />
            <div class="rowsm" id="quickMoods" style="margin-top:8px">
              <button class="secondary mood-chip" data-quick="tired">üò¥ Tired</button>
              <button class="secondary mood-chip" data-quick="stressed">üò∞ Stressed</button>
              <button class="secondary mood-chip" data-quick="celebrating">üéâ Celebrating</button>
              <button class="secondary mood-chip" data-quick="hungry">ü§§ Hungry</button>
            </div>
          </div>
          <div>
            <label>Location</label>
            <div class="row" style="margin-top:6px">
              <select id="citySelect">
                <option value='{"city":"London","country":"United Kingdom","country_code":"GB"}'>London, GB</option>
                <option value='{"city":"Nairobi","country":"Kenya","country_code":"KE"}'>Nairobi, KE</option>
                <option value='{"city":"New York","country":"United States","country_code":"US"}'>New York, US</option>
                <option value='{"city":"Tokyo","country":"Japan","country_code":"JP"}'>Tokyo, JP</option>
              </select>
              <input id="cityInputFree" placeholder="Type your city (optional)" style="width:180px" />
              <input id="latInput" placeholder="lat (optional)" style="width:130px" />
              <input id="lngInput" placeholder="lng (optional)" style="width:130px" />
            </div>

            <div style="margin-top:12px">
              <label>Dietary</label>
              <div class="chips" id="dietaryChips" style="margin-top:6px">
                <!-- chips rendered by JS -->
              </div>
            </div>
          </div>
        </div>

        <div class="row" style="margin-top:12px">
          <select id="budgetSelect">
            <option value="medium">Budget: Medium</option>
            <option value="low">Budget: Low</option>
            <option value="high">Budget: High</option>
          </select>
          <button id="decideBtn" class="big">üéØ Decide For Me</button>
        </div>
      </div>
      <!-- Add after the first decision card: -->
      <div id="installBanner" class="card" style="display:none; margin-top:8px">
        <div class="row" style="justify-content:space-between; align-items:center">
          <div>üì≤ Install VFIED for 1-tap access</div>
          <div class="row">
            <button id="installBtn" class="secondary">Install</button>
            <button id="installClose" class="secondary">‚úï</button>
          </div>
        </div>
      </div>
      <!-- Result Card -->
      <div class="card" id="resultCard" style="display:none">
        <div class="row" style="align-items:flex-start">
          <div class="emoji" id="foodEmoji">üçΩÔ∏è</div>
          <div class="result">
            <div class="big" id="foodName">Your suggestion appears here</div>
            <div class="muted" id="foodType"></div>
            <div style="margin-top:8px" id="friendMessage"></div>
            <div class="muted" style="margin-top:8px" id="reasoning"></div>
            <div class="muted" style="margin-top:8px" id="culturalNote"></div>
            <div class="muted" style="margin-top:8px" id="dietaryNote"></div>
            <div class="muted" style="margin-top:8px" id="weatherNote"></div>

            <div class="kpi" style="margin-top:10px">
              <span id="countryCode">‚Äî</span>
              <span id="confidence">‚Äî</span>
              <span id="weatherBadge">‚Äî</span>
              <span id="engineBadge">‚Äî</span>
            </div>
          </div>
        </div>

        <div class="row" style="margin-top:12px">
          <button id="acceptBtn">‚úÖ Accept</button>
          <button id="tryAgainBtn" class="secondary">üîÑ Try Again</button>
        </div>
      </div>

      <!-- Vendor Upload (Demo) -->
      <div class="card">
        <div class="row" style="justify-content:space-between">
          <h2 style="margin:0">üì§ Vendor Menu Upload (demo)</h2>
          <span class="small mono">Bearer demo_growth_key_456</span>
        </div>
        <div class="grid grid-2" style="margin-top:8px">
          <div>
            <label>Menu JSON</label>
            <textarea id="menuTextarea" rows="7" style="width:100%; margin-top:6px">[
  {"name":"Ugali Mayai","country_code":"KE","price":"8.99","tags":["vegetarian","comfort","protein"],"kcal":420,"protein_g":22,"carbs_g":60,"fat_g":10},
  {"name":"Fried Tilapia","country_code":"KE","price":"12.50","tags":["pescatarian","protein","healthy"],"kcal":500,"protein_g":40,"carbs_g":5,"fat_g":25}
]</textarea>
            <div class="row" style="margin-top:8px">
              <button id="uploadMenuBtn">Upload Menu</button>
              <button id="viewMenuBtn" class="secondary">View My Menu</button>
            </div>
          </div>
          <div>
            <label>Response</label>
            <pre id="menuResponse" class="mono" style="margin-top:6px; white-space:pre-wrap; background:#0b1220; padding:10px; border-radius:10px; border:1px solid #263247; height:170px; overflow:auto">‚Äî</pre>
          </div>
        </div>
      </div>
    </section>

    <section id="tab-events" class="tabpanel hidden" role="tabpanel" aria-labelledby="tab-events-btn">
      <div class="card">
        <h2 style="margin:0 0 8px;">üé∂ What's happening near me?</h2>
        <p class="muted small" style="margin:6px 0 12px;">
          Uses your current city/country selection.
        </p>
        <div class="row" style="gap:8px;">
          <button id="loadEventsBtn" class="secondary">Load events</button>
        </div>
      </div>

      <div class="card">
        <div id="eventsGrid" class="events-grid"></div>
      </div>
    </section>

    <section id="tab-travel" class="tabpanel hidden" role="tabpanel" aria-labelledby="tab-travel-btn">
      <div class="card">
        <h2 style="margin:0 0 8px;">üß≠ Travel: Must-try in your city</h2>
        <p class="muted small" style="margin:6px 0 12px;">
          Uses your current location selection (city/country).
        </p>
        <div class="row" style="gap:8px;">
          <button id="loadTravelBtn" class="secondary">Show must-try</button>
        </div>
      </div>
    
      <div class="card">
        <div id="travelIntro" class="muted" style="margin-bottom:8px;"></div>
        <div id="travelGrid" class="travel-grid"></div>
      </div>
    </section>
  </div>
  
  <script type="module" src="/src/main.js"></script>
</body>
</html>