System.register([],function(e,t){"use strict";return{execute:function(){var e=document.createElement("style");e.textContent='body{font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif!important;background:radial-gradient(80rem 50rem at 20% -10%,#1d2350 0%,transparent 60%),radial-gradient(60rem 40rem at 120% 10%,#174a2b 0%,transparent 50%),linear-gradient(180deg,#0a0e19,#070b14)!important}@media (min-width: 900px){.one-button-main,.tabpanel,#social-proof,[style*="max-width: 900px"]{max-width:430px!important;margin-left:auto!important;margin-right:auto!important}}.app-title{font-weight:900!important;font-size:28px!important;letter-spacing:.2px!important;background:linear-gradient(90deg,#fff,#c7d2fe);-webkit-background-clip:text;-webkit-text-fill-color:transparent}#context-info{background:rgba(255,255,255,.08);border:1px solid rgba(255,255,255,.18);border-radius:999px;padding:6px 10px;color:#9fb0c9}#mood-input{background:rgba(255,255,255,.08)!important;border:1px solid rgba(255,255,255,.18)!important;color:#e5ecff!important;border-radius:12px!important}.mood-detect-btn{border-radius:12px;border:1px solid rgba(255,255,255,.18);background:rgba(255,255,255,.1);color:#e5ecff;font-weight:700}#decide-button{width:100%;padding:16px;border:0;border-radius:16px;font-weight:900;letter-spacing:.3px;color:#fff;background:linear-gradient(90deg,#7c3aed,#6366f1)!important;box-shadow:0 16px 48px rgba(124,58,237,.35)}#decide-button .button-subtitle{opacity:.9;font-weight:600}.friend-chip{display:inline-flex;align-items:center;gap:8px;background:rgba(255,255,255,.1)!important;border:1px solid rgba(255,255,255,.16)!important;border-radius:999px;padding:8px 12px;font-weight:800}.friend-avatar{width:22px;height:22px;border-radius:50%;object-fit:cover}main section,.suggestion-card,.gem-card,.travel-card,.event-card{background:rgba(255,255,255,.06)!important;border:1px solid rgba(255,255,255,.14)!important;border-radius:16px!important;box-shadow:0 12px 30px rgba(0,0,0,.25)}#result-emoji{font-size:42px;margin-top:8px}#result-name{font-size:22px;font-weight:900;margin:4px 16px 2px;letter-spacing:.2px}#result-description{opacity:.95;margin:0 16px 8px;line-height:1.45}#restaurant-info{opacity:.9;margin:0 16px 12px}#insights-toggle{border-radius:12px;font-weight:800;background:rgba(255,255,255,.08);border:1px solid rgba(255,255,255,.14)}#insights-content>div{background:rgba(255,255,255,.07);border:1px solid rgba(255,255,255,.14);border-radius:10px;padding:10px 12px}.tabs{display:inline-flex;gap:6px;padding:6px;background:rgba(255,255,255,.06);border:1px solid rgba(255,255,255,.14);border-radius:14px}.tab{border:0;padding:8px 12px;font-weight:800;color:#cbd5e1;background:transparent;border-radius:10px;cursor:pointer}.tab.active{color:#fff;background:linear-gradient(90deg,#7c3aed,#6366f1)}.travel-card,.event-card{display:flex;gap:10px;padding:12px}.travel-emoji,.event-badge{font-size:22px;min-width:22px}.travel-title,.event-title{font-weight:800}.event-cta .insights-toggle{padding:6px 8px;border-radius:10px;border:1px solid rgba(255,255,255,.18);background:rgba(255,255,255,.08)}@media (max-width: 640px){.decision-actions{position:sticky;bottom:10px;z-index:20;background:rgba(10,14,25,.78);backdrop-filter:blur(12px);border:1px solid rgba(255,255,255,.14);border-radius:14px;padding:10px;gap:8px}.action-btn{flex:1}}.bottom-safe-area{height:calc(env(safe-area-inset-bottom) + 8px)}\n/*$vite$:1*/',document.head.appendChild(e);const t=new URLSearchParams(location.search).get("api");t&&localStorage.setItem("vfied_api",t);const n=localStorage.getItem("vfied_api"),a="undefined"!=typeof window&&window.__API__||"",o=(t||n||a||"").replace(/\/$/,"");console.log("API_BASE ->",o||"(same-origin)");const i=[{name:"Sarah",comment:"üî• Best ramen spot ever!",emoji:"üçú",avatar:"https://i.pravatar.cc/80?img=32"},{name:"James",comment:"üíØ Always go for the sushi here",emoji:"üç£",avatar:"https://i.pravatar.cc/80?img=12"},{name:"Aisha",comment:"üëå Perfect comfort food when tired",emoji:"üç≤",avatar:"https://i.pravatar.cc/80?img=58"}],r=[{food:{emoji:"üçú",name:"Tonkotsu Ramen"},friendMessage:"Warming and soothing ‚Äî perfect for stressed vibes.",availabilityNote:"Try Koya Soho or Tonkotsu (open now)",culturalNote:"Ramen culture in London has exploded ‚Äî Soho has great late-night bowls.",weatherNote:"Rainy/cold? Hot broth hits just right.",source:"local-fallback"},{food:{emoji:"üç£",name:"Sushi Set"},friendMessage:"Clean and fresh ‚Äî light but satisfying.",availabilityNote:"Sushi Atelier or Kanada-Ya nearby",culturalNote:"Japanese spots cluster around Fitzrovia & Soho.",weatherNote:"Great choice when you want something not too heavy.",source:"local-fallback"},{food:{emoji:"ü•ô",name:"Mezze Plate"},friendMessage:"Shareable, bright flavors, and not heavy.",availabilityNote:"Check Arabica Borough or a local Levantine spot",culturalNote:"Londons Middle Eastern scene is strong ‚Äî Borough & Edgware Road.",weatherNote:"Good in any weather; easy on the stomach.",source:"local-fallback"}];let s=[],d={},c=[];function l(e,t=!0){try{const n=e||document.getElementById("decide-button");if(!n)return;n.disabled=!!t;const a=document.getElementById("button-icon"),o=document.getElementById("button-text");t?(a&&(a.textContent="‚è≥"),o&&(o.textContent="Thinking‚Ä¶")):(a&&(a.textContent="üéØ"),o&&(o.textContent="DECIDE FOR ME"))}catch(n){console.warn("setThinking failed:",n)}}async function m(){const e=S("decide-button");l(e,!0),function(){const e=S("suggestion-skeleton"),t=S("suggestion-result");e&&e.classList.remove("hidden"),t&&t.classList.add("hidden")}(),N("üß† Analyzing your mood, weather, and local options...");try{const e=(S("mood-input")?.value||"").trim()||"hungry",t=function(){try{return JSON.parse(localStorage.getItem("vfied_prefs")||"{}")}catch{return{}}}(),n={location:{city:"London",country:"United Kingdom",country_code:"GB"},mood_text:e,dietary:t.dietary||[],budget:t.budget||"medium",menu_source:"global_database"},a=o?`${o}/v1/recommend`:"/v1/recommend",i=await fetch(a,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});if(!i.ok)throw new Error(`HTTP ${i.status}: ${i.statusText}`);const r=await i.json();g(h(r)),function({timeSavedMin:e=2}={}){const t=localStorage.getItem("vfied_stats"),n=t?JSON.parse(t):{totalDecisions:0,timeSaved:0};n.totalDecisions+=1,n.timeSaved+=e,localStorage.setItem("vfied_stats",JSON.stringify(n)),E()}({timeSavedMin:3})}catch(n){console.error(n),g(h((t=r)[Math.floor(Math.random()*t.length)])),N("‚ö†Ô∏è Server unavailable ‚Äî using a local fallback."),L("‚ö†Ô∏è Using offline suggestion (server unavailable).","warn")}finally{!function(){const e=S("suggestion-skeleton");e&&e.classList.add("hidden")}(),l(e,!1)}var t}function g(e){!function(e){const t=S(e);t&&t.classList.remove("hidden")}("suggestion-result"),$("result-emoji",e.food?.emoji||"üçΩÔ∏è"),$("result-name",e.food?.name||"Something delicious"),$("result-description",e.friendMessage||e.reasoning||"Perfect for your mood!"),$("restaurant-info",e.availabilityNote||""),j("cultural-note",e.culturalNote?`<strong>üåç Cultural insight</strong><br>${e.culturalNote}`:""),j("personal-note",e.personalNote?`<strong>üß† Personal note</strong><br>${e.personalNote}`:""),j("weather-note",e.weatherNote?`<strong>üå§Ô∏è Weather</strong><br>${e.weatherNote}`:""),function(e){const t=S("social-signals");if(!t)return;let n="";e.socialSignal&&(n+=`\n      <div class="social-signal friend-signal">\n        <span class="signal-icon">üë•</span>\n        <span class="signal-text">${e.socialSignal.message}</span>\n      </div>`),e.localSignal&&(n+=`\n      <div class="social-signal local-signal">\n        <span class="signal-icon">üìç</span>\n        <span class="signal-text">${e.localSignal.message}</span>\n      </div>`),t.innerHTML=n}(e),N("üéâ Perfect match found! How does this sound?")}function u(){C("suggestion-result"),N("üéâ Decision made! Ready for your next food adventure."),L("‚úÖ Enjoy your meal!","success")}function p(){C("suggestion-result"),m()}function f(e){const t=i.find(t=>t.name===e);if(!t)return;L(`üí¨ Asking ${t.name}: "${t.comment}"`,"info");const n=S("mood-input");n&&("üçú"===t.emoji?n.value="need something warming and comforting":"üç£"===t.emoji?n.value="feeling adventurous, want something fresh":n.value="need comfort food")}function h(e){const t=(e.food?.name||"").toLowerCase();let n=i[Math.floor(Math.random()*i.length)];if((t.includes("ramen")||t.includes("noodle"))&&(n=i[0]),(t.includes("sushi")||t.includes("japanese"))&&(n=i[1]),e.socialSignal={type:"friend",friend:n,message:`${n.name}: "${n.comment}"`},s.length){const t=s[Math.floor(Math.random()*s.length)];e.localSignal={type:"local_list",list:t,message:`Popular in "${t.name}" (${t.area})`}}return e}function b(e){const t=s.find(t=>t.name===e);if(!t)return;const n=S("mood-input");n&&(n.value=`want something from ${t.name} list in ${t.area}`),m()}function v(){const e=S("travel-city-select")?.value||Object.keys(d)[0],t=(d[e]||[]).slice(0,10),n=S("travel-grid");n&&(n.innerHTML="",t.forEach(t=>{const a=document.createElement("div");a.className="travel-card",a.innerHTML=`\n      <div class="travel-emoji">${t.emoji}</div>\n      <div class="travel-body">\n        <div class="travel-title">${M(t.name)}</div>\n        <div class="travel-note">${M(t.note||"")}</div>\n      </div>\n    `,a.addEventListener("click",()=>x(e,t.name)),n.appendChild(a)}))}function x(e,t){const n=S("mood-input");n&&(n.value=`travel mode: try ${t} in ${e}`),m()}function y(e){L(`üé™ ${e}\n(Integrate ticket link or detail view here)`,"info")}function w(e){window.open(`https://www.google.com/maps/search/?api=1&query=${e}`,"_blank")}function k(){const e=S("mood-input"),t=e?.value?.trim();if(!t)return L("üß† Please enter your mood first!","warn");L("üß† Mood analyzed ‚Äî using it in your next suggestion!","info"),m()}function E(){const e=localStorage.getItem("vfied_stats"),t=e?JSON.parse(e):{totalDecisions:0,timeSaved:0};$("decisions-count",t.totalDecisions),$("time-saved",t.timeSaved)}function L(e,t="info"){const n=S("vfied-toast-host");if(!n)return console.log(e);const a=document.createElement("div");a.className=`vfied-toast ${t}`,a.textContent=e,n.appendChild(a),requestAnimationFrame(()=>a.classList.add("show")),setTimeout(()=>{a.classList.remove("show"),setTimeout(()=>n.removeChild(a),250)},2600)}function S(e){return document.getElementById(e)}function $(e,t){const n=S(e);n&&(n.textContent=t)}function j(e,t){const n=S(e);n&&(n.innerHTML=t)}function C(e){const t=S(e);t&&t.classList.add("hidden")}function N(e){$("context-info",e)}function M(e){return String(e).replace(/[&<>"']/g,e=>({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"}[e]))}function T(e){e&&(e.setAttribute("aria-hidden","true"),e.classList.remove("open"))}document.addEventListener("DOMContentLoaded",()=>{!function(){if(document.getElementById("vfied-runtime-styles"))return;const e="\n  #vfied-toast-host {\n    position: fixed; left: 50%; bottom: 24px; transform: translateX(-50%);\n    display: flex; flex-direction: column; gap: 8px; z-index: 9999; pointer-events: none;\n  }\n  .vfied-toast {\n    pointer-events: auto;\n    min-width: 240px; max-width: 92vw;\n    padding: 10px 14px; border-radius: 10px; backdrop-filter: blur(8px);\n    background: rgba(0,0,0,.65); color: #fff; font-weight: 600; font-size: 14px;\n    opacity: 0; transform: translateY(8px); transition: all .25s ease;\n    border: 1px solid rgba(255,255,255,.15);\n  }\n  .vfied-toast.show { opacity: 1; transform: translateY(0); }\n  .vfied-toast.success { background: rgba(34,197,94,.85); }\n  .vfied-toast.warn { background: rgba(245,158,11,.9); }\n  .vfied-toast.error { background: rgba(239,68,68,.9); }\n\n  .skeleton-card {\n    background: rgba(255,255,255,.12); border: 1px solid rgba(255,255,255,.18);\n    border-radius: 16px; padding: 18px; max-width: 420px; margin: 8px auto;\n  }\n  .sk-line {\n    height: 14px; margin: 10px 0;\n    background: linear-gradient(90deg, rgba(255,255,255,.15), rgba(255,255,255,.25), rgba(255,255,255,.15));\n    background-size: 200% 100%; animation: sk-shimmer 1.4s infinite;\n    border-radius: 8px;\n  }\n  .sk-emoji { height: 46px; width: 46px; border-radius: 50%; margin: 0 auto 10px; }\n  .sk-title { height: 18px; width: 70%; margin: 12px auto; }\n  .sk-sub { width: 90%; margin: 10px auto; }\n  .sk-sub.short { width: 60%; }\n  @keyframes sk-shimmer { 0% { background-position: 200% 0; } 100% { background-position: -200% 0; } }\n\n  /* Friend avatar chip (if your CSS doesn't already style it) */\n  .friend-chip { display:inline-flex; align-items:center; gap:8px; }\n  .friend-avatar { width:22px; height:22px; border-radius:50%; object-fit:cover; }\n  ",t=document.createElement("style");t.id="vfied-runtime-styles",t.textContent=e,document.head.appendChild(t)}(),function(){if(S("vfied-toast-host"))return;const e=document.createElement("div");e.id="vfied-toast-host",document.body.appendChild(e)}(),function(){const e=S("decide-button"),t=S("detect-mood-btn"),n=S("accept-btn"),a=S("try-again-btn"),o=S("insights-toggle");e&&e.addEventListener("click",m),t&&t.addEventListener("click",k),n&&n.addEventListener("click",u),a&&a.addEventListener("click",p),o&&o.addEventListener("click",()=>{const e=S("insights-content");e.classList.contains("hidden")?(e.classList.remove("hidden"),o.textContent="ü§ñ Hide insights ‚Üë"):(e.classList.add("hidden"),o.textContent="ü§ñ Why this choice? ‚Üì")});const i=S("see-more-gems"),r=S("gems-modal"),d=S("gems-modal-close");i&&i.addEventListener("click",()=>{var e;!function(){const e=S("gems-modal-list");e&&(e.innerHTML=s.map(e=>`\n      <li>\n        <span style="font-size:18px;margin-right:6px;">${e.emoji}</span>\n        <strong>${e.name}</strong> <span style="opacity:.8">‚Ä¢ ${e.area}</span>\n      </li>`).join(""))}(),(e=r)&&(e.setAttribute("aria-hidden","false"),e.classList.add("open"))}),d&&d.addEventListener("click",()=>T(r)),r&&r.addEventListener("click",e=>{e.target===r&&T(r)})}(),document.querySelectorAll(".tab-btn").forEach(e=>{e.addEventListener("click",()=>{document.querySelectorAll(".tab-btn").forEach(e=>e.classList.remove("active")),e.classList.add("active");const t=e.dataset.tab;document.querySelectorAll(".tabpanel").forEach(e=>e.classList.add("hidden")),S(t)?.classList.remove("hidden")})}),function(){const e=S("friend-chips");e&&(e.innerHTML="",i.forEach(t=>{const n=document.createElement("button");n.className="friend-chip",n.innerHTML=`\n      <img class="friend-avatar" src="${t.avatar}" alt="${M(t.name)}" />\n      <span>${t.emoji} <strong>${M(t.name)}</strong></span>\n    `,n.addEventListener("click",()=>f(t.name)),e.appendChild(n)}))}(),async function(){try{const e="/data/local_lists.json",t=await fetch(e,{cache:"no-store"});s=await t.json()}catch{s=[]}!function(){const e=S("local-gems-grid");if(!e)return;const t=s.slice(0,8);e.innerHTML="",t.forEach(t=>{const n=document.createElement("div");n.className="gem-card",n.innerHTML=`\n      <div class="gem-emoji">${t.emoji}</div>\n      <div class="gem-name">${M(t.name)}</div>\n      <div class="gem-area">${M(t.area)}</div>\n    `,n.addEventListener("click",()=>b(t.name)),e.appendChild(n)})}()}(),async function(){try{const e="/data/travel_lists.json",t=await fetch(e,{cache:"no-store"});d=await t.json()}catch{d={}}(function(){const e=S("travel-city-select");if(!e)return;const t=Object.keys(d);e.innerHTML=t.map(e=>`<option value="${e}">${e}</option>`).join(""),e.addEventListener("change",()=>v())})(),v()}(),async function(){try{const e="/data/events.json",t=await fetch(e,{cache:"no-store"});c=await t.json()}catch{c=[]}!function(){const e=S("events-grid");e&&(e.innerHTML="",c.forEach(t=>{const n=document.createElement("div");n.className="event-card";const a=document.createElement("div");a.className="event-badge",a.textContent=t.emoji;const o=document.createElement("div");o.className="event-body";const i=document.createElement("div");i.className="event-title",i.textContent=t.title;const r=document.createElement("div");r.className="event-meta",r.textContent=`${t.date} ‚Ä¢ ${t.area} ‚Ä¢ ${t.price||"Free"}`;const s=document.createElement("div");s.className="event-cta";const d=document.createElement("button");d.className="insights-toggle",d.textContent="Details",d.addEventListener("click",()=>y(t.title));const c=document.createElement("button");c.className="insights-toggle",c.textContent="Directions",c.addEventListener("click",()=>w(encodeURIComponent(t.map||t.title))),s.append(d,c),o.append(i,r,s),n.append(a,o),e.appendChild(n)}))}()}(),E(),console.log("üöÄ VFIED unified main loaded")}),window.VFIED={askFriend:f,exploreGem:b,tryTravel:x,goEvent:y,goMaps:w}}}});
//# sourceMappingURL=index-legacy-yGTSvLvo.js.map
