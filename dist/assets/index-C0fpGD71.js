function X(){import.meta.url,import("_").catch(()=>1),(async function*(){})().next()}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))a(c);new MutationObserver(c=>{for(const t of c)if(t.type==="childList")for(const o of t.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&a(o)}).observe(document,{childList:!0,subtree:!0});function r(c){const t={};return c.integrity&&(t.integrity=c.integrity),c.referrerPolicy&&(t.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?t.credentials="include":c.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function a(c){if(c.ep)return;c.ep=!0;const t=r(c);fetch(c.href,t)}})();const $="http://localhost:3001";async function L(){const n=await fetch("".concat($,"/v1/countries"));if(!n.ok)throw new Error("Failed to load countries");return(await n.json()).countries}async function b({mood:n,location:e,dietary:r=[]}){const a=await fetch("".concat($,"/mcp/get_food_suggestion"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({mood:n,location:e,dietary:r})});if(!a.ok){const c=await a.text().catch(()=>"");throw new Error("Suggest failed: ".concat(a.status," ").concat(c))}return a.json()}function w(n){const e=(n||"").toUpperCase();if(e.length!==2)return"ðŸ³ï¸";const r=127462;return String.fromCodePoint(r+(e.charCodeAt(0)-65))+String.fromCodePoint(r+(e.charCodeAt(1)-65))}const h="http://localhost:3001",C="demo_growth_key_456",g=document.getElementById("moodInput"),m=document.getElementById("decideBtn"),y=document.getElementById("detectMoodBtn"),M=document.getElementById("citySelect"),k=document.getElementById("latInput"),_=document.getElementById("lngInput"),j=document.getElementById("budgetSelect"),x=document.getElementById("resultCard"),T=document.getElementById("foodEmoji"),A=document.getElementById("foodName"),O=document.getElementById("foodType"),P=document.getElementById("friendMessage"),F=document.getElementById("reasoning"),R=document.getElementById("culturalNote"),q=document.getElementById("dietaryNote"),J=document.getElementById("weatherNote"),D=document.getElementById("countryCode"),H=document.getElementById("confidence"),z=document.getElementById("weatherBadge"),W=document.getElementById("menuTextarea"),K=document.getElementById("uploadMenuBtn"),Y=document.getElementById("viewMenuBtn"),f=document.getElementById("menuResponse"),p=document.getElementById("dietaryChips"),G=["vegetarian","vegan","gluten-free","dairy-free","keto","halal","kosher","nut-free","paleo","pescatarian"];function U(){p.innerHTML="",G.forEach(n=>{const e="diet_".concat(n),r=document.createElement("label");r.className="chip",r.innerHTML='<input type="checkbox" id="'.concat(e,'" value="').concat(n,'"><span>').concat(n,"</span>"),p.appendChild(r)})}U();function V(){return Array.from(p.querySelectorAll('input[type="checkbox"]:checked')).map(n=>n.value)}function Q(){const n=JSON.parse(M.value),e=parseFloat(k.value),r=parseFloat(_.value);return!isNaN(e)&&!isNaN(r)&&(n.latitude=e,n.longitude=r),n}document.querySelectorAll("[data-quick]").forEach(n=>{n.addEventListener("click",()=>{const e={tired:"tired and need something comforting",stressed:"stressed but want something light",celebrating:"celebrating a small win",hungry:"very hungry and need food fast"};g.value=e[n.dataset.quick]||n.dataset.quick})});y&&y.addEventListener("click",()=>{g.value.trim()||(g.value="stressed but want something light"),y.textContent="ðŸ§  Mood understood!",setTimeout(()=>y.textContent="âœ¨ Detect Mood (AI)",1200)});m.addEventListener("click",async()=>{var c;const n=g.value.trim()||"hungry",e=Q(),r=V(),a=j.value;m.disabled=!0,m.textContent="ðŸ¤– Thinking...";try{const t=await fetch("".concat(h,"/v1/recommend"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer demo_growth_key_456"},body:JSON.stringify({location:e,mood_text:n,dietary:r,budget:a,menu_source:"global_database"})}),o=await t.json();if(!t.ok)throw new Error(o.error||"Request failed");const l=o.food||{};T.textContent=l.emoji||"ðŸ½ï¸",A.textContent=l.name||"Great Choice",O.textContent=l.type?"Cuisine: ".concat(l.type):"",P.textContent=o.friendMessage||o.description||"",F.textContent=o.reasoning||o.reason||"",R.textContent=o.culturalNote||"",q.textContent=o.dietaryNote||"",J.textContent=o.weatherNote||o.weatherReasoning||"",D.textContent=l.country_code?"ðŸ‡ºðŸ‡³ ".concat(l.country_code):"â€”",H.textContent=typeof o.confidence=="number"?"Confidence: ".concat(o.confidence,"%"):"Confidence: â€”",z.textContent=(c=o==null?void 0:o.weather)!=null&&c.description?"Weather: ".concat(o.weather.temperature,"Â°C â€¢ ").concat(o.weather.description):"Weather: â€”",x.style.display="block"}catch(t){alert("Error: ".concat(t.message))}finally{m.disabled=!1,m.textContent="ðŸŽ¯ Decide For Me"}});document.getElementById("acceptBtn").addEventListener("click",()=>{alert("âœ… Saved! Enjoy your meal."),x.style.display="none"});document.getElementById("tryAgainBtn").addEventListener("click",()=>{m.click()});K.addEventListener("click",async()=>{try{const n=JSON.parse(W.value),r=await(await fetch("".concat(h,"/v1/menus"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(C)},body:JSON.stringify({mode:"snapshot",menu:n})})).json();f.textContent=JSON.stringify(r,null,2)}catch(n){f.textContent="Error: ".concat(n.message)}});Y.addEventListener("click",async()=>{try{const i=await(await fetch("".concat(h,"/v1/menus"),{headers:{Authorization:"Bearer ".concat(C)}})).json();f.textContent=JSON.stringify(i,null,2)}catch(d){f.textContent="Error: ".concat(d.message)}let n=[],e=null,r="London",a="",c=[],t=null;async function o(){try{n=await L();const d=document.getElementById("countrySelect");if(!d)return;d.innerHTML='<option value="" disabled selected>Select your country</option>'+n.map(i=>'<option value="'.concat(i.code,'">').concat(i.name,"</option>")).join("")}catch(d){console.error(d)}}function l(){const d=document.getElementById("selectedFlag");d&&(d.textContent=e!=null&&e.code?w(e.code):"")}function E(d){const i=document.getElementById("loading");i&&(i.style.display=d?"block":"none")}function v(d){const i=document.getElementById("error");i&&(i.textContent=d||"")}function B(){const d=document.getElementById("resultBox");if(!d)return;if(!t){d.innerHTML="";return}const i="".concat(e!=null&&e.code?w(e.code)+" ":"").concat(r?r+", ":"").concat((e==null?void 0:e.name)||"");d.innerHTML='\n    <div class="header">'.concat(i,"</div>\n    ").concat(t.friendMessage?'<div class="friend">'.concat(t.friendMessage,"</div>"):"","\n    ").concat(t.dietaryNote?'<div class="note">'.concat(t.dietaryNote,"</div>"):"","\n    ").concat(t.weatherNote?'<div class="note">'.concat(t.weatherNote,"</div>"):"","\n    ").concat(t.food?'\n      <div class="food">\n        <div class="title">'.concat(t.food.emoji?t.food.emoji+" ":"").concat(t.food.name,"</div>\n        ").concat(t.culturalNote?'<div class="note">'.concat(t.culturalNote,"</div>"):"","\n      </div>"):"","\n    ").concat(Array.isArray(t.alternatives)&&t.alternatives.length?'<div class="alts">\n            <div class="alt-title">Alternatives</div>\n            <ul>'.concat(t.alternatives.map(u=>"<li>".concat(u.emoji?u.emoji+" ":"").concat(u.name,"</li>")).join(""),"</ul>\n          </div>"):"","\n  ")}document.addEventListener("DOMContentLoaded",()=>{var d,i,u,I;o(),(d=document.getElementById("countrySelect"))==null||d.addEventListener("change",s=>{const N=s.target.value;e=n.find(S=>S.code===N)||null,l()}),(i=document.getElementById("cityInput"))==null||i.addEventListener("input",s=>{r=s.target.value}),(u=document.getElementById("moodInput"))==null||u.addEventListener("input",s=>{a=s.target.value}),(I=document.getElementById("decideBtn"))==null||I.addEventListener("click",async()=>{try{if(v(""),E(!0),t=null,B(),!(e!=null&&e.code))throw new Error("Please select a country.");const s={mood:a||"surprise me with something balanced",location:{city:r||"",country:e.name,country_code:e.code},dietary:c};t=await b(s),B()}catch(s){v(s.message||"Something went wrong")}finally{E(!1)}})})});export{X as __vite_legacy_guard};
//# sourceMappingURL=index-C0fpGD71.js.map
