System.register([],function(e,t){"use strict";return{execute:function(){var e=document.createElement("style");e.textContent=':root{--bg:#0b0f1a;--card:#0e1526;--text:#e5ecff;--muted:#9fb0c9;--brand:#7c3aed;--brand2:#6366f1;--ok:#22c55e;--warn:#f59e0b;--surface:rgba(255,255,255,.08);--border:rgba(255,255,255,.18)}*{box-sizing:border-box}html,body{height:100%}body{margin:0;font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;color:var(--text);background:radial-gradient(80rem 50rem at 20% -10%,#1d2350 0%,transparent 60%),radial-gradient(60rem 40rem at 120% 10%,#174a2b 0%,transparent 50%),linear-gradient(180deg,#0a0e19,#070b14)}#app{max-width:980px;margin:0 auto;padding:24px 16px 100px}.simple-header{background:transparent;text-align:left;padding:0;margin-bottom:14px}.app-title{font-size:28px;font-weight:900;letter-spacing:.2px;margin:0;background:linear-gradient(90deg,#fff,#c7d2fe);-webkit-text-fill-color:transparent;-webkit-background-clip:text}#context-info{display:inline-block;margin-top:6px;padding:6px 10px;border-radius:999px;background:var(--surface);border:1px solid var(--border);color:var(--muted)}main section{background:var(--surface);border:1px solid var(--border);border-radius:16px;padding:16px;margin:12px 0;backdrop-filter:blur(10px)}.mood-section h3{margin:0 0 8px;font-size:15px;font-weight:800;color:#cbd5ff}.mood-input-container{display:flex;gap:8px;flex-wrap:wrap}#mood-input{flex:1;min-width:220px;padding:12px 14px;border-radius:12px;border:1px solid var(--border);background:rgba(255,255,255,.08);color:#fff}#mood-input::placeholder{color:#b8c0d9}#mood-input:focus{outline:2px solid rgba(124,58,237,.5)}#mood-match-text{font-size:13px;color:var(--muted)}#decide-button{width:100%;padding:16px;border:0;border-radius:16px;font-weight:900;letter-spacing:.3px;color:#fff;background:linear-gradient(90deg,var(--brand),var(--brand2));box-shadow:0 18px 40px rgba(124,58,237,.35)}#decide-button:hover{transform:translateY(-2px)}#decide-button .button-subtitle{opacity:.9;font-weight:600}#friend-chips{display:flex;gap:8px;flex-wrap:wrap}.friend-chip{display:flex;align-items:center;gap:8px;background:rgba(255,255,255,.12);border:1px solid var(--border);border-radius:999px;padding:8px 12px;font-weight:700}.friend-chip:hover{transform:translateY(-1px);background:rgba(255,255,255,.2)}.friend-avatar{width:22px;height:22px;border-radius:50%;border:2px solid rgba(255,255,255,.25);object-fit:cover}#suggestion-result{padding:0;overflow:hidden}.suggestion-card{background:var(--surface);border:1px solid var(--border);border-radius:16px}#social-signals{padding:10px 16px 0}.social-signal{border-radius:12px;padding:10px 12px;margin-bottom:8px;background:rgba(59,130,246,.14);border:1px solid rgba(59,130,246,.28)}.social-signal.local-signal{background:rgba(245,158,11,.14);border-color:rgba(245,158,11,.28)}.food-emoji,#result-emoji{font-size:40px;margin:10px 16px 0}.food-name,#result-name{font-size:20px;font-weight:900;margin:6px 16px 2px}.food-description,#result-description{margin:0 16px 8px;opacity:.96;line-height:1.4}#restaurant-info{margin:0 16px 12px;opacity:.92}.decision-actions,.action-buttons{padding:0 16px 16px;display:flex;gap:10px}.action-btn{border:0;border-radius:12px;font-weight:800;color:#fff;padding:12px 14px}.action-btn.accept{background:linear-gradient(135deg,#22c55e,#16a34a)}.action-btn.try-again{background:rgba(255,255,255,.16);border:1px solid var(--border)}.ai-insights{padding:0 16px 16px}#insights-toggle{width:100%;border:1px solid var(--border);background:rgba(255,255,255,.1);padding:10px 12px;border-radius:12px;font-weight:800;color:#fff}#insights-content{margin-top:10px}#insights-content>div{background:rgba(255,255,255,.08);border:1px solid var(--border);border-radius:10px;padding:10px 12px;margin-bottom:8px}#local-gems-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(160px,1fr));gap:12px}.gem-card{background:var(--surface);border:1px solid var(--border);border-radius:14px;padding:14px}.gem-emoji{font-size:22px}.gem-name{font-weight:900;margin-top:6px}.gem-area{opacity:.9;font-size:13px}.tabs{display:flex;gap:8px;margin:12px 0 16px;border-bottom:1px solid rgba(255,255,255,.14);padding-bottom:6px}.tab-btn,.tab{background:#0b1220;border:1px solid #263247;color:#e2e8f0;padding:10px 12px;border-radius:10px;font-weight:700}.tab-btn.active,.tab.active{background:var(--brand);border-color:var(--brand);color:#fff}.skeleton{position:relative;overflow:hidden;background:rgba(255,255,255,.12);border-radius:12px}.skeleton:after{content:"";position:absolute;top:0;right:0;bottom:0;left:0;transform:translate(-100%);background:linear-gradient(90deg,transparent,rgba(255,255,255,.25),transparent);animation:shimmer 1.2s infinite}@keyframes shimmer{to{transform:translate(100%)}}.toast-wrap{position:fixed;left:50%;transform:translate(-50%);bottom:24px;display:flex;flex-direction:column;gap:8px;z-index:9999;width:min(92%,440px);pointer-events:none}.toast{pointer-events:auto;background:rgba(15,23,42,.92);border:1px solid var(--border);color:#fff;padding:12px 14px;border-radius:12px;display:flex;gap:10px;align-items:center;box-shadow:0 8px 24px rgba(0,0,0,.3)}.toast.ok{border-color:rgba(34,197,94,.45)}.toast.warn{border-color:rgba(245,158,11,.45)}.toast.err{border-color:rgba(239,68,68,.45)}footer{position:fixed;left:0;right:0;bottom:0;background:rgba(0,0,0,.22);backdrop-filter:blur(10px);padding:10px 16px;border-top:1px solid rgba(255,255,255,.14)}footer p{margin:2px 0;font-size:13px;opacity:.9}@media (max-width:640px){#app{padding:18px 12px 92px}.decision-actions,.action-buttons{flex-direction:column}}\n/*$vite$:1*/',document.head.appendChild(e);const t="undefined"!=typeof window&&window.__API__||"https://vfied-v3.onrender.com",n=[{name:"Sarah",comment:"üî• Best ramen spot ever!",emoji:"üçú",avatar:"https://i.pravatar.cc/80?img=32"},{name:"James",comment:"üíØ Always go for the sushi here",emoji:"üç£",avatar:"https://i.pravatar.cc/80?img=12"},{name:"Aisha",comment:"üëå Perfect comfort food when tired",emoji:"üç≤",avatar:"https://i.pravatar.cc/80?img=58"}],a=[{food:{emoji:"üçú",name:"Tonkotsu Ramen"},friendMessage:"Warming and soothing ‚Äî perfect for stressed vibes.",availabilityNote:"Try Koya Soho or Tonkotsu (open now)",culturalNote:"Ramen culture in London has exploded ‚Äî Soho has great late-night bowls.",weatherNote:"Rainy/cold? Hot broth hits just right.",source:"local-fallback"},{food:{emoji:"üç£",name:"Sushi Set"},friendMessage:"Clean and fresh ‚Äî light but satisfying.",availabilityNote:"Sushi Atelier or Kanada-Ya nearby",culturalNote:"Japanese spots cluster around Fitzrovia & Soho.",weatherNote:"Great choice when you want something not too heavy.",source:"local-fallback"},{food:{emoji:"ü•ô",name:"Mezze Plate"},friendMessage:"Shareable, bright flavors, and not heavy.",availabilityNote:"Check Arabica Borough or a local Levantine spot",culturalNote:"London‚Äôs Middle Eastern scene is strong ‚Äî Borough & Edgware Road.",weatherNote:"Good in any weather; easy on the stomach.",source:"local-fallback"}];let o=[],i={},r=[];function s(e,t=!0){try{const n=e||document.getElementById("decide-button");if(!n)return;n.disabled=!!t;const a=document.getElementById("button-icon"),o=document.getElementById("button-text");t?(a&&(a.textContent="‚è≥"),o&&(o.textContent="Thinking‚Ä¶")):(a&&(a.textContent="üéØ"),o&&(o.textContent="DECIDE FOR ME"))}catch(n){console.warn("setThinking failed:",n)}}async function d(){const e=k("decide-button");s(e,!0),function(){const e=k("suggestion-skeleton"),t=k("suggestion-result");e&&e.classList.remove("hidden"),t&&t.classList.add("hidden")}(),S("üß† Analyzing your mood, weather, and local options...");try{const e=(k("mood-input")?.value||"").trim()||"hungry",n=function(){try{return JSON.parse(localStorage.getItem("vfied_prefs")||"{}")}catch{return{}}}(),a={location:{city:"London",country:"United Kingdom",country_code:"GB"},mood_text:e,dietary:n.dietary||[],budget:n.budget||"medium",menu_source:"global_database"},o=await fetch(`${t}/v1/recommend`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!o.ok)throw new Error(`HTTP ${o.status}: ${o.statusText}`);const i=await o.json();c(m(i)),function({timeSavedMin:e=2}={}){const t=localStorage.getItem("vfied_stats"),n=t?JSON.parse(t):{totalDecisions:0,timeSaved:0};n.totalDecisions+=1,n.timeSaved+=e,localStorage.setItem("vfied_stats",JSON.stringify(n)),y()}({timeSavedMin:3})}catch(o){console.error(o),c(m((n=a)[Math.floor(Math.random()*n.length)])),S("‚ö†Ô∏è Server unavailable ‚Äî using a local fallback."),w("‚ö†Ô∏è Using offline suggestion (server unavailable).","warn")}finally{!function(){const e=k("suggestion-skeleton");e&&e.classList.add("hidden")}(),s(e,!1)}var n}function c(e){!function(e){const t=k(e);t&&t.classList.remove("hidden")}("suggestion-result"),E("result-emoji",e.food?.emoji||"üçΩÔ∏è"),E("result-name",e.food?.name||"Something delicious"),E("result-description",e.friendMessage||e.reasoning||"Perfect for your mood!"),E("restaurant-info",e.availabilityNote||""),L("cultural-note",e.culturalNote?`<strong>üåç Cultural insight</strong><br>${e.culturalNote}`:""),L("personal-note",e.personalNote?`<strong>üß† Personal note</strong><br>${e.personalNote}`:""),L("weather-note",e.weatherNote?`<strong>üå§Ô∏è Weather</strong><br>${e.weatherNote}`:""),function(e){const t=k("social-signals");if(!t)return;let n="";e.socialSignal&&(n+=`\n      <div class="social-signal friend-signal">\n        <span class="signal-icon">üë•</span>\n        <span class="signal-text">${e.socialSignal.message}</span>\n      </div>`),e.localSignal&&(n+=`\n      <div class="social-signal local-signal">\n        <span class="signal-icon">üìç</span>\n        <span class="signal-text">${e.localSignal.message}</span>\n      </div>`),t.innerHTML=n}(e),S("üéâ Perfect match found! How does this sound?")}function l(){$("suggestion-result"),S("üéâ Decision made! Ready for your next food adventure."),w("‚úÖ Enjoy your meal!","success")}function p(){$("suggestion-result"),d()}function g(e){const t=n.find(t=>t.name===e);if(!t)return;w(`üí¨ Asking ${t.name}: ‚Äú${t.comment}‚Äù`,"info");const a=k("mood-input");a&&("üçú"===t.emoji?a.value="need something warming and comforting":"üç£"===t.emoji?a.value="feeling adventurous, want something fresh":a.value="need comfort food")}function m(e){const t=(e.food?.name||"").toLowerCase();let a=n[Math.floor(Math.random()*n.length)];if((t.includes("ramen")||t.includes("noodle"))&&(a=n[0]),(t.includes("sushi")||t.includes("japanese"))&&(a=n[1]),e.socialSignal={type:"friend",friend:a,message:`${a.name}: ‚Äú${a.comment}‚Äù`},o.length){const t=o[Math.floor(Math.random()*o.length)];e.localSignal={type:"local_list",list:t,message:`Popular in ‚Äú${t.name}‚Äù (${t.area})`}}return e}function u(e){const t=o.find(t=>t.name===e);if(!t)return;const n=k("mood-input");n&&(n.value=`want something from ${t.name} list in ${t.area}`),d()}function f(){const e=k("travel-city-select")?.value||Object.keys(i)[0],t=(i[e]||[]).slice(0,10),n=k("travel-grid");n&&(n.innerHTML="",t.forEach(t=>{const a=document.createElement("div");a.className="travel-card",a.innerHTML=`\n      <div class="travel-emoji">${t.emoji}</div>\n      <div class="travel-body">\n        <div class="travel-title">${j(t.name)}</div>\n        <div class="travel-note">${j(t.note||"")}</div>\n      </div>\n    `,a.addEventListener("click",()=>b(e,t.name)),n.appendChild(a)}))}function b(e,t){const n=k("mood-input");n&&(n.value=`travel mode: try ${t} in ${e}`),d()}function x(e){w(`üé™ ${e}\n(Integrate ticket link or detail view here)`,"info")}function h(e){window.open(`https://www.google.com/maps/search/?api=1&query=${e}`,"_blank")}function v(){const e=k("mood-input"),t=e?.value?.trim();if(!t)return w("üß† Please enter your mood first!","warn");w("üß† Mood analyzed ‚Äî using it in your next suggestion!","info"),d()}function y(){const e=localStorage.getItem("vfied_stats"),t=e?JSON.parse(e):{totalDecisions:0,timeSaved:0};E("decisions-count",t.totalDecisions),E("time-saved",t.timeSaved)}function w(e,t="info"){const n=k("vfied-toast-host");if(!n)return console.log(e);const a=document.createElement("div");a.className=`vfied-toast ${t}`,a.textContent=e,n.appendChild(a),requestAnimationFrame(()=>a.classList.add("show")),setTimeout(()=>{a.classList.remove("show"),setTimeout(()=>n.removeChild(a),250)},2600)}function k(e){return document.getElementById(e)}function E(e,t){const n=k(e);n&&(n.textContent=t)}function L(e,t){const n=k(e);n&&(n.innerHTML=t)}function $(e){const t=k(e);t&&t.classList.add("hidden")}function S(e){E("context-info",e)}function j(e){return String(e).replace(/[&<>"']/g,e=>({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"}[e]))}function C(e){e&&(e.setAttribute("aria-hidden","true"),e.classList.remove("open"))}document.addEventListener("DOMContentLoaded",()=>{!function(){if(document.getElementById("vfied-runtime-styles"))return;const e="\n  #vfied-toast-host {\n    position: fixed; left: 50%; bottom: 24px; transform: translateX(-50%);\n    display: flex; flex-direction: column; gap: 8px; z-index: 9999; pointer-events: none;\n  }\n  .vfied-toast {\n    pointer-events: auto;\n    min-width: 240px; max-width: 92vw;\n    padding: 10px 14px; border-radius: 10px; backdrop-filter: blur(8px);\n    background: rgba(0,0,0,.65); color: #fff; font-weight: 600; font-size: 14px;\n    opacity: 0; transform: translateY(8px); transition: all .25s ease;\n    border: 1px solid rgba(255,255,255,.15);\n  }\n  .vfied-toast.show { opacity: 1; transform: translateY(0); }\n  .vfied-toast.success { background: rgba(34,197,94,.85); }\n  .vfied-toast.warn { background: rgba(245,158,11,.9); }\n  .vfied-toast.error { background: rgba(239,68,68,.9); }\n\n  .skeleton-card {\n    background: rgba(255,255,255,.12); border: 1px solid rgba(255,255,255,.18);\n    border-radius: 16px; padding: 18px; max-width: 420px; margin: 8px auto;\n  }\n  .sk-line {\n    height: 14px; margin: 10px 0;\n    background: linear-gradient(90deg, rgba(255,255,255,.15), rgba(255,255,255,.25), rgba(255,255,255,.15));\n    background-size: 200% 100%; animation: sk-shimmer 1.4s infinite;\n    border-radius: 8px;\n  }\n  .sk-emoji { height: 46px; width: 46px; border-radius: 50%; margin: 0 auto 10px; }\n  .sk-title { height: 18px; width: 70%; margin: 12px auto; }\n  .sk-sub { width: 90%; margin: 10px auto; }\n  .sk-sub.short { width: 60%; }\n  @keyframes sk-shimmer { 0% { background-position: 200% 0; } 100% { background-position: -200% 0; } }\n\n  /* Friend avatar chip (if your CSS doesn't already style it) */\n  .friend-chip { display:inline-flex; align-items:center; gap:8px; }\n  .friend-avatar { width:22px; height:22px; border-radius:50%; object-fit:cover; }\n  ",t=document.createElement("style");t.id="vfied-runtime-styles",t.textContent=e,document.head.appendChild(t)}(),function(){if(k("vfied-toast-host"))return;const e=document.createElement("div");e.id="vfied-toast-host",document.body.appendChild(e)}(),function(){const e=k("decide-button"),t=k("detect-mood-btn"),n=k("accept-btn"),a=k("try-again-btn"),i=k("insights-toggle");e&&e.addEventListener("click",d),t&&t.addEventListener("click",v),n&&n.addEventListener("click",l),a&&a.addEventListener("click",p),i&&i.addEventListener("click",()=>{const e=k("insights-content");e.classList.contains("hidden")?(e.classList.remove("hidden"),i.textContent="ü§ñ Hide insights ‚Üë"):(e.classList.add("hidden"),i.textContent="ü§ñ Why this choice? ‚Üì")});const r=k("see-more-gems"),s=k("gems-modal"),c=k("gems-modal-close");r&&r.addEventListener("click",()=>{var e;!function(){const e=k("gems-modal-list");e&&(e.innerHTML=o.map(e=>`\n      <li>\n        <span style="font-size:18px;margin-right:6px;">${e.emoji}</span>\n        <strong>${e.name}</strong> <span style="opacity:.8">‚Ä¢ ${e.area}</span>\n      </li>`).join(""))}(),(e=s)&&(e.setAttribute("aria-hidden","false"),e.classList.add("open"))}),c&&c.addEventListener("click",()=>C(s)),s&&s.addEventListener("click",e=>{e.target===s&&C(s)})}(),document.querySelectorAll(".tab-btn").forEach(e=>{e.addEventListener("click",()=>{document.querySelectorAll(".tab-btn").forEach(e=>e.classList.remove("active")),e.classList.add("active");const t=e.dataset.tab;document.querySelectorAll(".tabpanel").forEach(e=>e.classList.add("hidden")),k(t)?.classList.remove("hidden")})}),function(){const e=k("friend-chips");e&&(e.innerHTML="",n.forEach(t=>{const n=document.createElement("button");n.className="friend-chip",n.innerHTML=`\n      <img class="friend-avatar" src="${t.avatar}" alt="${j(t.name)}" />\n      <span>${t.emoji} <strong>${j(t.name)}</strong></span>\n    `,n.addEventListener("click",()=>g(t.name)),e.appendChild(n)}))}(),async function(){try{const e=await fetch("/data/local_lists.json",{cache:"no-store"});o=await e.json()}catch{o=[]}!function(){const e=k("local-gems-grid");if(!e)return;const t=o.slice(0,8);e.innerHTML="",t.forEach(t=>{const n=document.createElement("div");n.className="gem-card",n.innerHTML=`\n      <div class="gem-emoji">${t.emoji}</div>\n      <div class="gem-name">${j(t.name)}</div>\n      <div class="gem-area">${j(t.area)}</div>\n    `,n.addEventListener("click",()=>u(t.name)),e.appendChild(n)})}()}(),async function(){try{const e=await fetch("/data/travel_lists.json",{cache:"no-store"});i=await e.json()}catch{i={}}(function(){const e=k("travel-city-select");if(!e)return;const t=Object.keys(i);e.innerHTML=t.map(e=>`<option value="${e}">${e}</option>`).join(""),e.addEventListener("change",()=>f())})(),f()}(),async function(){try{const e=await fetch("/data/events.json",{cache:"no-store"});r=await e.json()}catch{r=[]}!function(){const e=k("events-grid");e&&(e.innerHTML="",r.forEach(t=>{const n=document.createElement("div");n.className="event-card";const a=document.createElement("div");a.className="event-badge",a.textContent=t.emoji;const o=document.createElement("div");o.className="event-body";const i=document.createElement("div");i.className="event-title",i.textContent=t.title;const r=document.createElement("div");r.className="event-meta",r.textContent=`${t.date} ‚Ä¢ ${t.area} ‚Ä¢ ${t.price||"Free"}`;const s=document.createElement("div");s.className="event-cta";const d=document.createElement("button");d.className="insights-toggle",d.textContent="Details",d.addEventListener("click",()=>x(t.title));const c=document.createElement("button");c.className="insights-toggle",c.textContent="Directions",c.addEventListener("click",()=>h(encodeURIComponent(t.map||t.title))),s.append(d,c),o.append(i,r,s),n.append(a,o),e.appendChild(n)}))}()}(),y(),console.log("üöÄ VFIED unified main loaded")}),window.VFIED={askFriend:g,exploreGem:u,tryTravel:b,goEvent:x,goMaps:h}}}});
//# sourceMappingURL=index-legacy-BNOK8P5V.js.map
